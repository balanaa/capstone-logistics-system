# Analytics Page - Quick Reference

## Visual Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Business Analytics                                         â”‚
â”‚  Performance metrics across all departments                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° FINANCIAL PERFORMANCE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Unpaid   â”‚  â”‚  Paid    â”‚  â”‚Collectionâ”‚                 â”‚
â”‚  â”‚ â‚±245,751 â”‚  â”‚ â‚±892,340 â”‚  â”‚  78.4%   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                             â”‚
â”‚  Unpaid by Consignee:                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚Consignee â”‚   Amount    â”‚  Count â”‚                      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
â”‚  â”‚PUREGOLD  â”‚ â‚±125,000.00 â”‚    8   â”‚                      â”‚
â”‚  â”‚ROBINSONS â”‚  â‚±85,500.50 â”‚    5   â”‚                      â”‚
â”‚  â”‚MONTOSCO  â”‚  â‚±35,250.00 â”‚    3   â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                             â”‚
â”‚  Monthly Revenue Trends:                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Month  â”‚ Revenue  â”‚   Paid   â”‚  Unpaid  â”‚   %    â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚Oct 2024â”‚â‚±156,780  â”‚â‚±120,450  â”‚ â‚±36,330  â”‚ 76.8%  â”‚    â”‚
â”‚  â”‚Nov 2024â”‚â‚±189,650  â”‚â‚±175,821  â”‚ â‚±13,830  â”‚ 92.7%  â”‚    â”‚
â”‚  â”‚...     â”‚   ...    â”‚   ...    â”‚   ...    â”‚  ...   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš› TRUCKING PERFORMANCE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚Avg Days  â”‚  â”‚ Transit  â”‚  â”‚Best Avg  â”‚                 â”‚
â”‚  â”‚   5.8    â”‚  â”‚    12    â”‚  â”‚   4.5    â”‚                 â”‚
â”‚  â”‚Portâ†’Yard â”‚  â”‚containersâ”‚  â”‚Juan D.C. â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                             â”‚
â”‚  Average by Driver:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Driver    â”‚Avg Days  â”‚ Trips â”‚ Performance  â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚Juan D. Cruz â”‚ 4.5 days â”‚  24   â”‚ [Excellent]  â”‚        â”‚
â”‚  â”‚Pedro Santos â”‚ 5.2 days â”‚  18   â”‚ [Good]       â”‚        â”‚
â”‚  â”‚Maria Garcia â”‚ 6.8 days â”‚  15   â”‚ [Fair]       â”‚        â”‚
â”‚  â”‚Jose Reyes   â”‚ 7.1 days â”‚  12   â”‚ [Needs Imp.] â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ DOCUMENT PROCESSING EFFICIENCY                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚Avg Time  â”‚  â”‚ Pending  â”‚  â”‚ Fastest  â”‚                 â”‚
â”‚  â”‚   2.3    â”‚  â”‚    7     â”‚  â”‚   1.8    â”‚                 â”‚
â”‚  â”‚Uploadâ†’OK â”‚  â”‚   docs   â”‚  â”‚   BOL    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                             â”‚
â”‚  Processing by Type:                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚Document Type â”‚Avg Days  â”‚Processedâ”‚ Speed  â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚Bill of Ladingâ”‚ 1.8 days â”‚   45    â”‚[Fast]  â”‚           â”‚
â”‚  â”‚Invoice       â”‚ 2.1 days â”‚   42    â”‚[Normal]â”‚           â”‚
â”‚  â”‚Packing List  â”‚ 2.5 days â”‚   38    â”‚[Normal]â”‚           â”‚
â”‚  â”‚Delivery Orderâ”‚ 3.2 days â”‚   35    â”‚[Slow]  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš¡ BOTTLENECK ANALYSIS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸  Note: Requires timestamp columns                      â”‚
â”‚      Add to pro table: status_updated_at,                  â”‚
â”‚      trucking_completed_at, finance_completed_at           â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚Shipment  â”‚  â”‚Trucking  â”‚  â”‚ Finance  â”‚                 â”‚
â”‚  â”‚   N/A    â”‚  â”‚   N/A    â”‚  â”‚   N/A    â”‚                 â”‚
â”‚  â”‚  dept    â”‚  â”‚   dept   â”‚  â”‚   dept   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Color Coding

### Financial Cards

- ğŸ”´ **Red** - Unpaid (border-left: #dc2626)
- ğŸŸ¢ **Green** - Paid (border-left: #16a34a)
- ğŸ”µ **Blue** - Collection Rate (border-left: #2563eb)

### Trucking Cards

- ğŸŸ  **Orange** - Avg Turnaround (border-left: #f59e0b)
- ğŸŸ£ **Purple** - In Transit (border-left: #8b5cf6)
- ğŸŸ¢ **Green** - Best Driver (border-left: #10b981)

### Document Processing Cards

- ğŸ”µ **Blue** - Avg Processing (border-left: #3b82f6)
- ğŸŸ  **Orange** - Pending (border-left: #f59e0b)
- ğŸŸ¢ **Green** - Fastest (border-left: #10b981)

### Performance Badges

- ğŸŸ¢ **Excellent** - Green background (#d1fae5)
- ğŸ”µ **Good** - Blue background (#dbeafe)
- ğŸŸ¡ **Fair** - Yellow background (#fef3c7)
- ğŸ”´ **Needs Improvement** - Red background (#fee2e2)

---

## Data Flow

```
User Opens Analytics Page
         â†“
   Loading State
         â†“
   fetchAnalyticsData()
         â†“
   [Currently: Mock Data]
   [Future: Real Queries]
         â†“
   Process & Format Data
         â†“
   Update State
         â†“
   Render Components
```

### Mock Data Flow (Current)

```javascript
fetchAnalyticsData()
  â†’ setTimeout(800ms)  // Simulate loading
  â†’ setAnalyticsData(mockData)
  â†’ setLoading(false)
```

### Real Data Flow (Future)

```javascript
fetchAnalyticsData()
  â†’ fetchAllAnalyticsData()
    â†’ Promise.all([
        getTotalUnpaidAmount(),
        getTotalPaidAmount(),
        getUnpaidAmountByConsignee(),
        // ... 10 more queries
      ])
  â†’ setAnalyticsData(realData)
  â†’ setLoading(false)
```

---

## Key Calculations

### Financial

```javascript
// Collection Rate
collectionRate = (paidAmount / (paidAmount + unpaidAmount)) * 100;

// Monthly totals
revenue = paid + unpaid;
collectionPercent = (paid / revenue) * 100;
```

### Trucking

```javascript
// Turnaround Days
days = (returnDate - departDate) / (1000 * 60 * 60 * 24);

// Average by driver
avgDays = totalDays / trips;
```

### Document Processing

```javascript
// Processing Time
days = (approvalDate - uploadDate) / (1000 * 60 * 60 * 24);

// Speed classification
fast = avgDays < 2;
normal = avgDays >= 2 && avgDays < 3;
slow = avgDays >= 3;
```

---

## Responsive Breakpoints

### Desktop (> 1200px)

- 3-column KPI cards
- Full-width tables
- All details visible

### Tablet (768px - 1200px)

- 2-column KPI cards
- Scrollable tables
- Compact spacing

### Mobile (< 768px)

- 1-column layout
- Stacked cards
- Horizontal scroll tables
- Reduced font sizes

---

## API Reference

### Main Component

```javascript
// src/pages/Analytics/Analytics.js

function Analytics() {
  const [analyticsData, setAnalyticsData] = useState({...});
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchAnalyticsData();
  }, []);

  return (
    <div className="analytics-container">
      {/* Sections */}
    </div>
  );
}
```

### Service Functions

```javascript
// src/services/supabase/analytics.js

// Financial
getTotalUnpaidAmount() â†’ number
getTotalPaidAmount() â†’ number
getUnpaidAmountByConsignee() â†’ Array<{consignee, amount, count}>
getMonthlyRevenueTrends() â†’ Array<{month, revenue, paid, unpaid}>

// Trucking
getAverageTurnaroundDays() â†’ number
getAverageTurnaroundByDriver() â†’ Array<{driver, avgDays, trips}>
getContainersInTransit() â†’ number

// Documents
getAverageDocProcessingTime() â†’ number
getProcessingTimeByDocType() â†’ Array<{docType, avgDays, count}>
getPendingDocumentsCount() â†’ number

// Bottleneck (requires schema changes)
getAverageShipmentDays() â†’ number
getAverageTruckingDays() â†’ number
getAverageFinanceDays() â†’ number

// All-in-one
fetchAllAnalyticsData() â†’ Object (all metrics)
```

---

## CSS Classes Reference

### Layout

- `.analytics-container` - Main wrapper
- `.analytics-section` - Each metric category
- `.kpi-cards` - Grid of KPI cards
- `.analytics-widget` - Table containers

### Components

- `.kpi-card` - Individual metric card
- `.kpi-label` - Card title
- `.kpi-value` - Large number
- `.kpi-sublabel` - Subtitle text

### Tables

- `.analytics-table` - Main table style
- `.consignee-name` - Bold primary column
- `.amount-cell` - Right-aligned money
- `.performance-badge` - Colored status badge

---

## Example Usage in Other Components

### Import Analytics

```javascript
import Analytics from "./pages/Analytics";

function App() {
  return (
    <Routes>
      <Route path="/analytics" element={<Analytics />} />
    </Routes>
  );
}
```

### Link to Analytics

```javascript
<Link to="/analytics">View Analytics</Link>
```

---

## Testing Examples

### Test Individual Query

```javascript
import { getTotalUnpaidAmount } from "./services/supabase/analytics";

// In component or test file
const testUnpaid = async () => {
  const amount = await getTotalUnpaidAmount();
  console.log("Unpaid:", amount);
};
```

### Test All Queries

```javascript
import { fetchAllAnalyticsData } from "./services/supabase/analytics";

const testAll = async () => {
  const data = await fetchAllAnalyticsData();
  console.table(data);
};
```

---

## Quick Switch to Real Data

**Step 1:** Open `src/pages/Analytics/Analytics.js`

**Step 2:** Find line ~30 and replace:

```javascript
// FROM THIS (Mock):
const fetchAnalyticsData = async () => {
  setLoading(true);
  await new Promise(resolve => setTimeout(resolve, 800));
  const mockData = {...};
  setAnalyticsData(mockData);
  setLoading(false);
};

// TO THIS (Real):
import { fetchAllAnalyticsData } from '../../services/supabase/analytics';

const fetchAnalyticsData = async () => {
  setLoading(true);
  try {
    const data = await fetchAllAnalyticsData();
    setAnalyticsData(data);
  } catch (error) {
    console.error('Error:', error);
  } finally {
    setLoading(false);
  }
};
```

**Done!** Analytics now uses real data.

---

## Performance Tips

### Caching

```javascript
const CACHE_TIME = 5 * 60 * 1000; // 5 minutes
let cache = null;
let lastFetch = null;

if (cache && Date.now() - lastFetch < CACHE_TIME) {
  return cache;
}
```

### Debouncing

```javascript
const debouncedFetch = debounce(fetchAnalyticsData, 1000);
```

### Real-time Updates

```javascript
useEffect(() => {
  const sub = supabase
    .channel("analytics")
    .on(
      "postgres_changes",
      { event: "*", schema: "public", table: "pro" },
      () => fetchAnalyticsData()
    )
    .subscribe();

  return () => sub.unsubscribe();
}, []);
```

---

## Common Pitfalls

âŒ **Don't** query on every render
âœ… **Do** use `useEffect` with proper dependencies

âŒ **Don't** fetch data synchronously
âœ… **Do** use async/await with try/catch

âŒ **Don't** ignore loading/error states
âœ… **Do** provide user feedback

âŒ **Don't** hardcode data in components
âœ… **Do** use service layer separation

---

## Quick Checklist

- [x] Component created
- [x] Styles applied
- [x] Mock data working
- [x] Service layer ready
- [ ] Real data tested
- [ ] Performance optimized
- [ ] Error handling added
- [ ] Mobile responsive verified
- [ ] Accessibility checked
- [ ] Documentation reviewed
